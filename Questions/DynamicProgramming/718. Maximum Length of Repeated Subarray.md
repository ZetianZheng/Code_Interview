---
title: 718. Maximum Length of Repeated Subarray
date: 2023/06/11
author: Runming
type: 题解
---

# [Maximum Length of Repeated Subarray - LeetCode](https://leetcode.com/problems/maximum-length-of-repeated-subarray/description/)
## Tag
#double_array, #dp
## 审题（关键词）
最长subarray，两个数组，repeat

## 初始思路  
subarray 就是连续子序列。

```
二维数组可以用来记录两个字符串的所有情况。
定义:
	dp[i][j] ：以下标i - 1为结尾的A，
	和以下标j - 1为结尾的B，
	最长重复子数组长度为dp[i][j]
递推:
	当i和j相等时
		dp[i][j] = dp[i-1][j-1] + 1
```
## 考点  

## 解法  
```java
class Solution {
    public int findLength(int[] nums1, int[] nums2) {
        int len1 = nums1.length;
        int len2 = nums2.length;

        // dp[i][j] ：以下标i - 1为结尾的A，和以下标j - 1为结尾的B，最长重复子数组长度为dp[i][j]，
        // 为了处理数组为空的情况，即0
        int[][] dp = new int[len1 + 1][len2 + 1];
        // 初始化；当一方数组没有值是（0），dp[0][j] 或者dp[i][0] 都为0

        int res = 0;
        // 遍历所有的情况：以i-1结尾的A和以j-1结尾的B数组
        for (int i = 1; i <= len1; i++) {
            for (int j = 1; j <= len2; j++) {
                // 结尾相等，则以i-2,和以j-2的最长重复子数组的长度加1.
                if (nums1[i - 1] == nums2[j - 1]) {
                    dp[i][j] = dp[i - 1][j - 1] + 1;
                    res = Math.max(res, dp[i][j]);
                }
            }
        }

        return res;
    }
}
```
> 滚动数组解法：
```java
class Solution {
    public int findLength(int[] nums1, int[] nums2) {
        int len1 = nums1.length;
        int len2 = nums2.length;

        // dp[i][j] ：以下标i - 1为结尾的A，和以下标j - 1为结尾的B，最长重复子数组长度为dp[i][j]，
        // 为了处理数组为空的情况，即0
        int[] dp = new int[len2 + 1];
        // 初始化；当一方数组没有值是（0），dp[0][j] 或者dp[i][0] 都为0

        int res = 0;
        // 由i-1, j-1决定i,j, 所有可以一层层的更新。
        for (int i = 1; i <= len1; i++) {
            // 从后往前遍历，防止覆写上一层的数据。
            for (int j = len2; j >= 1; j--) {
                if (nums1[i - 1] == nums2[j - 1]) {
                    dp[j] = dp[j - 1] + 1;
                } else {
                    dp[j] = 0;
                }
                res = Math.max(res, dp[j]);
            }
        }

        return res;
    }
}
```
## 难点

