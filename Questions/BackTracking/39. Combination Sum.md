---
title: 39. Combination Sum
date: 2023/05/14
author: Runming
type: 题解
---

# [Combination Sum - LeetCode](https://leetcode.com/problems/combination-sum/)

## Tag
#backtracking, #combination

## 审题
Combination Sum, unlimited number of times

## 初始想法
于 [[216. Combination Sum III]] 一致，不限制数字使用次数，

在sum3中，使用startIndex 来限制，  
本题中start Index可以从自己起始，既可以防止重复，也可以实现 unlimted的思路。  

## solution
```java
class Solution {
    public List<List<Integer>> combinationSum(int[] candidates, int target) {
        List<List<Integer>> ans = new ArrayList<>();
        List<Integer> path = new ArrayList<>();
        Arrays.sort(candidates);
        // parmas：
        // ans: 最终答案
        // path: 记录路径
        // startIndex: 递归深度，记录candidates中的递归起始点， （for循环的起始位置）
        backTracking(candidates, target, ans, path, 0);

        return ans;
    }

    void  backTracking(
        int[] candidates, 
        int target, 
        List<List<Integer>> ans, 
        List<Integer> path, 
        int startIndex) {
            // BC:
            if (target == 0) {
                ans.add(new ArrayList<>(path));
                return ;
            }

            // recursion:
            for (int i = startIndex; i < candidates.length; i++) {
                // 剪枝
                if (target < 0) {
                    break;
                }

                // pre-handle:
                // 进入节点：更新路径和状态
                path.add(candidates[i]);
                target -= candidates[i];
                
                backTracking(candidates, target, ans, path, i);
                
                // post-handle
                // 离开节点：回溯维护状态
                target += candidates[i];
                path.remove(path.size() - 1);
            }

        }
}
```
## 难点