---
title: 1005. Maximize Sum Of Array After K Negations
date: 2023/05/23
author: Runming
type: 题解
---

# [Maximize Sum Of Array After K Negations - LeetCode](https://leetcode.com/problems/maximize-sum-of-array-after-k-negations/description/)

## Tag
#greedy
## 审题（关键词） 
翻转数字k次，总和最大

## 初始思路  
贪心的思路： 
- 局部最优：让绝对值大的负数变为正数，当前数值达到最大，
- 整体最优：整个数组和达到最大。
问题：
1. 如果有剩下的k怎么办？
	1. 如果k可以被2整除，那么可以同一个数反复翻转
	2. 如果k余1， 那么需要牺牲一个最小的绝对值，减去。
4. 如果k用完还有负数？
	1. 从小到大排序，贪心先翻转并加上所有最小的负值
## 考点  
贪心算法

## 解法  
```java
class Solution {
    public int largestSumAfterKNegations(int[] nums, int k) {
        int sum = 0;
        int smallest = Integer.MAX_VALUE;
        // 排序保证最小的先被翻转
        Arrays.sort(nums);

        for (int i = 0; i < nums.length ; i++) {
            if (nums[i] < 0 && k > 0) {
                k--;
                sum -= nums[i];
            } else {
                sum += nums[i];
            }

            smallest = Math.min(smallest, Math.abs(nums[i]));
        }

        // 如果有剩下的k，且不能自我翻转消除，
        // 找到绝对值最小的值，减去它。
        if (k > 0 && k % 2 != 0) {
            sum -= smallest * 2;
        }

        return sum;

    }
}
```

## 难点
k能不能用完的思考，贪心，局部和整体。